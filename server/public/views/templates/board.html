<div ng-if="vm.userRole.details[0].is_gm" ng-include="'views/partials/nav.html'"></div>
<div ng-if="!vm.userRole.details[0].is_gm" ng-include="'views/partials/playernav.html'"></div>
<!-- TODO - use ngIf to change nav here for player ?? or other method -->

<md-content>
    <h1>{{vm.campaignDetailArray.list[0].title}}</h1>
    <div layout="row" layout-wrap>
        <div flex="20">
            <div>
                <img src="./images/honk.png" class="campaign-photo" alt="">
            </div>
            Next Session:
            <p>{{vm.campaignData.nextSession}}</p>
            Game Master:
            <p>{{vm.campaignData.gm}}</p>
            Users in this campaign:
            <md-list ng-repeat="user in vm.userList">
                <md-list-item>
                    {{user.username}}
                </md-list-item>
            </md-list>
            <md-button><a href="#/user" name="user home">User Profile</a></md-button>
        </div>
        <div flex="75">
            <div class="newComment" flex layout="column">
                <md-input-container>
                    <label>Post a new comment:</label>
                    <textarea ng-model="vm.newComment.content" rows="3" md-select-on-focus></textarea>
                </md-input-container>
                <md-button ng-click="vm.postComment(vm.newComment)" class="md-raised md-primary">Post!</md-button>
            </div>
            <md-list flex>

            <!-- TODO - add pictures to photos -->
                <md-subheader class="md-no-sticky">Comments</md-subheader>
                <md-list-item class="md-3-line" ng-repeat="comment in vm.commentArray.list" ng-click="null">
                    <img src={{comment.image_url}} class="md-avatar" />
                    <div class="md-list-item-text" layout="column">
                        <h3>{{ comment.username }} says:</h3>
                        <h4>{{ comment.date }} at {{comment.time}}</h4>
                        <p>{{ comment.content }}</p>
                    </div>
                <md-divider></md-divider>                
                </md-list-item>
        </div>
        <div flex="5"></div>
    </div>
</md-content>