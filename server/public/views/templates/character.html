<div ng-include="'views/partials/playernav.html'"></div>


<md-content>
    <h1>Character</h1>
    <md-tabs md-dynamic-height md-border-bottom>

        <!-- <!All party tab -->
        <md-tab label="My Party">
            <md-list ng-repeat="character in vm.partyArray.list">
                <md-list-item class="md-3-line" ng-click="null">
                    <img class="character-profile" ng-src="../images/honk.png" /> {{character.name}} : Level {{character.level}} {{character.race}} {{character.class}}, {{character.alignment}}
                    <md-divider></md-divider>
                </md-list-item>
            </md-list>
        </md-tab>

        <!-- View character Details -->
        <md-tab label="Character Sheet" ng-repeat="character in vm.characterSheetArray.details">
            <md-subhead>Character Details</md-subhead>
            <md-card layout-padding class="details">
                <span>
                    <span layout-padding>
                        <strong>Player Name:</strong> {{character.player_name}}
                    </span>
                    <span layout-padding>
                        <strong>Character Name:</strong> {{character.name}}
                    </span>
                    <span layout-padding>
                        <strong>Level:</strong> {{character.level}}
                    </span>
                    <span layout-padding>
                        <strong>Race:</strong> {{character.race}}
                    </span>
                    <span layout-padding>
                        <strong>Class:</strong> {{character.class}}
                    </span>
                </span>

            </md-card>
            <md-subhead>Attributes</md-subhead>            
            <div flex layout="row" class="attributes">
            <md-card >
                <md-list>
                    <md-list-item class="md-1-line" ng-click="null">
                       <b layout-padding>Strength:</b> {{character.strength}}
                    </md-list-item>
                    <md-list-item class="md-1-line" ng-click="null">
                        <b layout-padding>Dexterity:</b> {{character.dexterity}}
                    </md-list-item>
                    <md-list-item class="md-1-line" ng-click="null">
                        <b layout-padding>Constitution:</b> {{character.constitution}}
                    </md-list-item>
                    <md-list-item class="md-1-line" ng-click="null">
                        <b layout-padding>Intelligence:</b> {{character.intelligence}}
                    </md-list-item>
                    <md-list-item class="md-1-line" ng-click="null">
                        <b layout-padding>Wisdom:</b> {{character.wisdom}}
                    </md-list-item>
                    <md-list-item class="md-1-line" ng-click="null">
                        <b layout-padding>Charisma:</b> {{character.charisma}}
                    </md-list-item>
                </md-list>
            </md-card>   
            <div layout="column">
            <md-subhead>Stats</md-subhead>            
                    <md-card >
                        <md-list>
                            <md-list-item class="md-1-line" ng-click="null">
                               <b layout-padding>HP:</b> {{character.hp}}
                            </md-list-item>
                            <md-list-item class="md-1-line" ng-click="null">
                                <b layout-padding>AC:</b> {{character.ac}}
                            </md-list-item>
                            <md-list-item class="md-1-line" ng-click="null">
                                <b layout-padding>Passive Perception:</b> {{character.passive_perception}}
                            </md-list-item>
                            <md-list-item class="md-1-line" ng-click="null">
                                <b layout-padding>Intelligence:</b> {{character.intelligence}}
                            </md-list-item>
                            <md-list-item class="md-1-line" ng-click="null">
                                <b layout-padding>Wisdom:</b> {{character.wisdom}}
                            </md-list-item>
                            <md-list-item class="md-1-line" ng-click="null">
                                <b layout-padding>Charisma:</b> {{character.charisma}}
                            </md-list-item>
                        </md-list>
                    </md-card>
                </div>
                    </div>      
        </md-tab>

        <!-- Character's spells -->
        <md-tab label="My Spellbook">
        <md-button>Clear Cast Count</md-button>
            <md-list ng-repeat="spell in vm.spellbookArray.list">
                <md-list-item class="md-2-line" ng-click="null">
                    <span>{{spell.name}} - Level {{spell.spell_level}}</span>
                    <span flex layout-align="end end"></span>
                    <md-button class="md-raised md-accent">Cast Count +</md-button>
                </md-list-item>
            </md-list>

        </md-tab>

        <!-- Character's Inventory -->
        <md-tab label="Inventory">
                <h3>Total Weight : {{vm.characterInventoryArray.list[0].total_weight}} lbs</h3>
                <md-list ng-repeat="item in vm.characterInventoryArray.list">
                        <md-list-item class="md-1-line" ng-click="null">
                            <span>{{item.name}} - {{item.description}}</span>
                            <span flex layout-align="end end"></span>
                            <label for="">Ammo/Charges</label>
                            {{item.charges}}
                            <md-button class="md-fab md-mini md-accent">-</md-button>
                            <md-button class="md-fab md-mini md-primary">+</md-button>                            
                        </md-list-item>
                    </md-list>
        </md-tab>
        <!-- Edit your Character -->
        <md-tab label="Edit Character">

            <div layout="column" ng-cloak class="md-inline-form" layout-padding ng-repeat="character in vm.characterSheetArray.details">

                <md-subhead layout-gt-sm="row">Character Details</md-subhead>
                <md-card>
                    <md-content layout-gt-sm="row" layout-padding>
                        <div>
                            <md-input-container>
                                <label>Player Name</label>
                                <input ng-model="vm.editCharacter.player_name">
                            </md-input-container>

                            <md-input-container>
                                <label>Character Name</label>
                                <input ng-model="vm.editCharacter.name" type="text">
                            </md-input-container>
                        </div>


                        <div layout-gt-xs="row">
                            <md-input-container flex-gt-xs>
                                <label>Level</label>
                                <input ng-model="vm.editCharacter.level" type="number">
                            </md-input-container>

                            <md-input-container>
                                <label>Class</label>
                                <md-select ng-model="vm.editCharacter.class_id">
                                    <md-option ng-repeat="class in vm.classArray.list" ng-value="class.id">{{class.name}}</md-option>
                                </md-select>
                            </md-input-container>


                            <md-input-container>
                                <label>Race</label>
                                <md-select ng-model="vm.editCharacter.race_id">
                                    <md-option ng-repeat="race in vm.raceArray.list" ng-value="race.id">{{race.name}}</md-option>
                                </md-select>
                            </md-input-container>

                            <md-input-container>
                                <label>Alignment</label>
                                <md-select ng-model="vm.editCharacter.alignment_id">
                                    <md-option ng-repeat="alignment in vm.alignmentArray.list" ng-value="alignment.id">{{alignment.name}}</md-option>
                                </md-select>
                            </md-input-container>
                        </div>
                </md-card>
                <!-- TODO - investigate other methods for formatting than mdCard -->

                <md-subhead>Stats</md-subhead>
                <md-card>
                    <div ng-cloak>
                        <md-content layout="row" layout-padding>
                            <md-slider-container flex>
                                <md-input-container>
                                    <input type="number" ng-model="vm.editCharacter.strength" aria-label="strength" aria-controls="strength-slider">
                                </md-input-container>
                                <md-slider ng-model="vm.editCharacter.strength" min="0" max="20" aria-label="strength" id="strength-slider" class="md-accent"
                                    md-vertical md-range></md-slider>
                                </md-slider>
                                <h5>STR</h5>
                            </md-slider-container>

                            <md-slider-container flex>
                                <md-input-container>
                                    <input type="number" ng-model="vm.editCharacter.dexterity" aria-label="dex" aria-controls="dexterity-slider">
                                </md-input-container>
                                <md-slider ng-model="vm.editCharacter.dexterity" min="0" max="20" aria-label="dexterity" id="dexterity-slider" class="md-accent"
                                    md-vertical md-range></md-slider>
                                </md-slider>
                                <h5>DEX</h5>
                            </md-slider-container>

                            <md-slider-container flex>
                                <md-input-container>
                                    <input flex type="number" ng-model="vm.editCharacter.constitution" aria-label="con" aria-controls="con-slider">
                                </md-input-container>
                                <md-slider ng-model="vm.editCharacter.constitution" min="0" max="20" aria-label="con" id="con-slider" class="md-accent" md-vertical
                                    md-range></md-slider>
                                </md-slider>
                                <h5>CON</h5>
                            </md-slider-container>

                            <md-slider-container flex>
                                <md-input-container>
                                    <input flex type="number" ng-model="vm.editCharacter.intelligence" aria-label="int" aria-controls="int-slider">
                                </md-input-container>
                                <md-slider ng-model="vm.editCharacter.intelligence" min="0" max="20" aria-label="int" id="int-slider" class="md-accent" md-vertical
                                    md-range></md-slider>
                                </md-slider>
                                <h5>INT</h5>
                            </md-slider-container>

                            <md-slider-container flex>
                                <md-input-container>
                                    <input flex type="number" ng-model="vm.editCharacter.wisdom" aria-label="wis" aria-controls="wis-slider">
                                </md-input-container>
                                <md-slider ng-model="vm.editCharacter.wisdom" min="0" max="20" aria-label="wis" id="wis-slider" class="md-accent" md-vertical
                                    md-range></md-slider>
                                </md-slider>
                                <h5>WIS</h5>
                            </md-slider-container>

                            <md-slider-container flex>
                                <md-input-container>
                                    <input flex type="number" ng-model="vm.editCharacter.charisma" aria-label="cha" aria-controls="cha-slider">
                                </md-input-container>
                                <md-slider ng-model="vm.editCharacter.charisma" min="0" max="20" aria-label="cha" id="cha-slider" class="md-accent" md-vertical
                                    md-range></md-slider>
                                </md-slider>
                                <h5>CHA</h5>
                            </md-slider-container>

                        </md-content>
                    </div>
                </md-card>

                <md-subhead>More</md-subhead>
                <md-card>
                    <md-input-container>
                        <label>HP</label>
                        <input type="number" ng-model="vm.editCharacter.hp">
                    </md-input-container>

                    <md-input-container>
                        <label>AC</label>
                        <input type="number" ng-model="vm.editCharacter.ac">
                    </md-input-container>

                    <md-input-container>
                        <label>Passive Perception</label>
                        <input type="number" ng-model="vm.editCharacter.passive_perception">
                    </md-input-container>


                    <md-input-container>
                        <label>Initiative Bonus</label>
                        <input type="number" ng-model="vm.editCharacter.initiative_bonus">
                    </md-input-container>
                </md-card>

                <md-subhead>
                    Background
                </md-subhead>
                <md-card>
                    <md-input-container>
                        <label>Character Bio</label>
                        <textarea ng-value="character.bio" ng-model="vm.editCharacter.bio" rows="3" md-select-on-focus></textarea>
                    </md-input-container>
                </md-card>

                <md-card>

                    <md-button md-raised md-primary ng-click="vm.editCharacter(vm.editCharacter)">Edit Character</md-button>
                </md-card>
                </md-content>
            </div>

        </md-tab>
    </md-tabs>
</md-content>